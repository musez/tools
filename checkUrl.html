<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title></title>
    <!--引用css-->
    <link rel="stylesheet" href="css/bootstrap.min.css">
</head>
<body>
<h1>bootatarp 2模态框</h1>
<!--链接-->
<a href="http://www.baidu.com/">http://www.baidu.com/</a>

<!-- 询问模态框 -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">&nbsp;</h3>
    </div>
    <div class="modal-body">
        <p>您访问的链接即将离开“<span id="modalDomainName"></span>”门户网站 是否继续？</p>
        <input id="modalOuterURL" type="hidden">
    </div>
    <div class="modal-footer">
        <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">放弃</button>
        <button class="btn btn-danger" onclick="toRedirect()">继续访问</button>
    </div>
</div>

<!--引用js-->
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script>
    $("a").each(function () {
        $(this).click(function (event) {
            checkDomain(event, "192.168.1.25");
        });
    });

    /**
     * 外链确认跳转
     * @param e 触发事件Event对象
     * @param domainUrl 当前站点域名
     * @param domainName 当前站点名，默认为domainUrl值
     */
    function checkDomain(e, domainUrl, domainName) {
        if (!arguments[0]) {
            alert("传入的参数格式有误！");
            return;
        }

        if (!arguments[1]) {
            alert("传入的参数格式有误！");
            return;
        }

        var domainName = arguments[2] ? arguments[2] : arguments[1];
        var outerURL = getTarget(e).getAttribute("href");

        if (outerURL != "" && outerURL.toLowerCase().indexOf("javascript:") == -1 && outerURL.toLowerCase().indexOf(domainUrl) == -1) {
            preventDefault(e);

            document.getElementById("modalDomainName").innerHTML = domainName;
            document.getElementById("modalOuterURL").value = outerURL;

            $('#myModal').modal('show');
        }
    }

    /**
     * 页面跳转
     */
    function toRedirect() {
        $('#myModal').modal('hide');

        var outerURL = document.getElementById("modalOuterURL").value;
        window.open(outerURL);
    }

    /**
     * 获取DOM对象
     * @param event Event对象
     * @returns DOM对象
     */
    function getTarget(event) {
        return event.target || event.srcElement;
    }

    /**
     * 阻止默认事件
     * @param event Event对象
     */
    function preventDefault(event) {
        if (event.preventDefault) {
            event.preventDefault();
        } else {
            event.returnValue = false;
        }
    }
</script>
</body>
</html>
